---
title: "네트워크(2)-신호의 전송과 충돌"
excerpt: "컴퓨터공학을 정리해봅니다."

categories:
  - cs
tags:
  - computer science
  - network
last_modified_at: 2020-01-30T08:06:00-05:00
---

> 책 `<하루 3분 네트워크 교실 >, 아미노 에이지` 을 읽고 정리한 내용입니다
>
> [1. 네트워크 기초 지식](/cs/network_1)에서는 네트워크 구축과 순서, 단계를 다루고 있습니다

이번 포스팅은 OSI 참조 모델의 1계층(물리계층)과 2계층(데이터링크계층)에 대해서 다뤄봅니다.

물리 계층은 **케이블이 연결되어 있는 기기에 신호를 전달하는 역할**을 하고,

물리 상위 계층은 **데이터 전달 전후** 작업을 담당한다.

그 중 데이터링크 계층은 **신호가 닿는 범위에서의 데이터 전송에 관한 규정**을 담당한다.



# 물리 계층의 역할 :one:

![osi physical layer에 대한 이미지 검색결과](https://computernetworkingonlinehelp.com/images/PL.png)

## 전기, 기계적인 전송

물리 계층은 전기, 기계적인 전송을 수행한다. 

즉, 통신 매체에 데이터를 보내는 것과 그 데이터가 지나는 것에 대한 순서와 규칙이다.

통신 매체(케이블)에 대한 규칙도 물리계층에서 정해져 있다.

**케이블이 연결되어 있는 기기에 신호를 전달하는 역할**



## 통신 매체

신호가 지나는 '파이프' 역할을 하는 것, 무선과 유선이 있다.

유선 케이블에는 **전기신호를 사용하는 동선**과 **광신호를 사용하는 광파이버**가 있다.

- LAN에서는 주로 **동선케이블인 UTP**를 사용한다.

인터페이스는 **LAN용 케이블을 연결하는 NIC**(Network Interface Card)와 **WAN에서는 DCE**(Data Circuit terminating Equipment, 회선종단기기)를 사용한다.



# 신호와 충돌

## 신호

**인터페이스는 비트를 신호로, 신호를 비트로 변환하는 기기**

신호에는 **아날로그 신호와 디지털 신호**가 있다. 데이터 통신에서는 일반적으로 디지털 신호가 사용된다.

이 신호의 형태에 따라 **통신속도**가 결정된다. 통신속도는 **단위시간 동안 전송되는 비트 수**로, 일반적으로 **bps**(bit per second) 단위를 사용한다.

- 1초에 신호가 2번이라면 2비트를 표현할 수 있다. 
- 1신호에 2비트를 표현(`00`, `01`, `10`, `11`) 할 수 있다.
- 통신속도 = 1초간의 신호의 횟수 * 1신호에서의 비트 수



## 신호에 발생하는 문제

**감쇠**

- 긴 **케이블을 지나는 동안 신호가 약해진다.**
- 리피터로 해결 가능

**노이즈, 간섭**

- **신호의 형태가 왜곡되는 경우** 신호의 진폭을 정확히 읽을 수 없다.
- 실드 케이블을 통해 해결 가능
- 광파이버는 노이즈, 간섭을 받지 않는다.

**충돌**

- 멀티액세스 네트워크에서 발생
- **신호가 보내지는 중에 다른 신호를 보내는 경우 발생한다.**
- 데이터링크 계층에서 해결 가능



# 허브 :herb:

허브에 케이블로 연결되어 있는 기기는 동일 케이블에 연결되어 있는 것과 같은 취급을 받는다.

## 허브의 기능

1. **신호의 증폭과 재생**

   감쇄에 의해 붕괴된 신호를 본래의 형태로 증폭,재생한다.

2. 네트워크 구축

   **복수의 기기를 연결**해서 네트워크를 구축한다.

   허브에 연결되어 있는 기기간 신호를 주고받을 수 있다.

**허브간 접속을 통해 신호의 도달 범위를 늘릴 수 있다.**



## 충돌 도메인

허브는 수신한 신호에 대해 증폭 외에 어떠한 제어도 하지 않는다.

허브는 **수신한 포트 이외의 모든 포트에 수신한 신호를 송신한다.(플러딩)**

따라서, **허브에 연결된 기기가 신호를 보내면 충돌**이 일어날 수 있다.

- 허브로 연결되어 있는 컴퓨터는 같은 충돌 도메인에 있다.
- **충돌 도메인은 작아야 한다.**

<img src="https://networklessons.com/wp-content/uploads/2016/11/hub-collision-domain.png" alt="관련 이미지" style="zoom:80%;" />



# 데이터링크 계층의 역할 :two:

## 개요

충돌을 막기 위해 **신호의 송신 전이나 수신 후에 바르게 데이터를 송수신하는 순서**가 필요하다.

데이터링크 계층은 **신호가 닿는 범위에서의 데이터 전송에 관한 규정**을 생각한다.

즉. **세그먼트 범위에서의 데이터 전송**에 관한 규정

- 세그먼트 범위 밖에서는 상위 계층에서 관리한다.



## 프레이밍과 신호의 동기

**1계층에서 다루는 신호와 케이블 등에 따라 2계층의 규격이 달라지게 된다.**

- LAN용 / WAN 용
- 전송 계층 이상의 계층에서는 LAN과 WAN이 동일한 규칙을 사용한다.
- **LAN의 사실표준은 이더넷**



**프레이밍**

- 송수신되는 비트열에 의미를 주어 데이터로 취급할 수 있게 한다.
- 프리앰블 : "이제 프레임 시작이야"
- 비트를 읽는 타이밍을 맞추기 위함
  - 동기 통신 : 타이밍을 맞추는 신호를 보낸다.
  - 비동기 통신 : 프리앰블을 이용한다.



# 데이터링크 계층 주소와 이더넷

## 주소와 캐스트

주소는 **데이터를 보내는 상대와 자신을 특정하는 데이터**를 말한다.

이 주소를 어떻게 배정할지를 정하는 것을 **어드레싱**이라고 한다.

주소의 종류

- 유니캐스트
- 브로드캐스트
- 멀티캐스트

![unicast multicast broadcast에 대한 이미지 검색결과](https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F2721A1505783B03519)

## MAC주소

각각의 주소는 적어도 하나의 유니캐스트 주소를 가진다.

- 라우터는 복수의 인터페이스 가진다. 인터페이스마다 유니캐스트 주소 갖는다.
- **유니캐스트 주소는 유일해야 한다.**

이더넷에서는 MAC주소를 사용한다.

- **MAC주소는 인터페이스에 지정된 고유 주소!**
- 16진수 12자리로 표기

![MAC-48 Address.svg](https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/MAC-48_Address.svg/475px-MAC-48_Address.svg.png)

# 이더넷

## 이더넷 프레임

이더넷에서 사용하는 데이터링크 계층 PDU

<img src="https://lh4.googleusercontent.com/proxy/f9McmRRLti8LJ8LCpwda9t-TDiZrC5qJAKBD-EaXE-PE18yIJN5ELwMgMTi56yShiEAZfgpFt8dc51HlyHUwajvXLb8qorauVAETlNzEo2Z8p_p1OgyjalwYdCKZ__vpfcM2JFCE0m94x_FnN6V6_QXxqgR077_s5igzSCtB5vU" alt="ethernet frame에 대한 이미지 검색결과" style="zoom:150%;" />

이더넷 헤더

- 수신처 MAC, 송신처 MAC, 페이로드 타입

이더넷 트레일러

- FCS
  - 통신 도중에는 에러를 고칠 수 없다.
  - FCS를 통해 에러가 있었던 프레임은 파기
  - 파기 여부를 송신측에 알리지 않는다.



## 이더넷 동작

허브를 이용한 멀티액세스 네트워크의 경우 신호는 모든 기기에 도달한다.

이더넷에서는 **수신한 프레임의 수신처MAC 주소를 보고 자신에게 온 것외의 다른 프레임을 파기**

멀티캐스트의 경우 자신의 주소 그룹의 일원이 아니면 파기, 브로드캐스트는 반드시 수신한다.



### 충돌 관리

이더넷은 **CSMA/CD**(Carrier Sense Multiple Access/Colision Detection) 라는 **액세스 제어**를 시행한다.

- 충돌 회피
- CS : 누군가 송신중이라면 송신하지 않는다
- MA : 아무도 송신하지 않으면 송신할 수 있다
- CD : 송신 후 충돌이 일어나면 다시 재수행

<img src="https://t1.daumcdn.net/cfile/tistory/99AA2F455CFF141320" alt="CSMA CD에 대한 이미지 검색결과" style="zoom:67%;" />

# 스위치

## 허브와 스위치

충돌 도메인 내 컴퓨터의 수가 많으면 **충돌 가능성이 증가해 효율이 나빠진다.**

**충돌은 허브에서 발생한다.**

- 케이블에서는 송신신호와 수신신호가 나뉘어 있다. 충돌 발생하지 않음

**스위치는 다음을 이용해 허브를 대신해 충돌을 막는다.**

- MAC 주소 필터링
- 버퍼링



## MAC 주소 필터링

학습

- **수신한 프레임의 송신처 MAC 주소를 기록한다.**
- 스위치에서 수신한 포트와 MAC주소를 연관시킨다.
- **어드레스 테이블**에 기록

스위칭

- **프레임의 수신처 MAC주소를 보고 해당 MAC 주소가 있는 포트만 프레임을 송신**
- **수신처가 다른 프레임이 동시에 스위치에 도달해도 충돌 발생하지 않는다.**

학습 전의 MAC주소 수신의 프레임을 수신한 경우, 멀티캐스트, 브로드캐스트 프레임 수신한 경우는 **플러딩**한다.

<img src="https://1.bp.blogspot.com/-W96QvaZSs5Q/VVSfkuhslTI/AAAAAAAAcf8/Nf-x3iT6j98/s1600/switch2.png" alt="img" style="zoom:80%;" />