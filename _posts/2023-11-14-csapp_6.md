---
title: "CSAPP(6) - The Memory Hierarchy"
excerpt: "Computer Systems : A Programmer’s Perspective - 6장"

categories:
  - cs
tags:
  - csapp
last_modified_at: 2023-11-14T08:00:00-08:00
---

# 1. Storage Technologies

## 1.1. Random Access Memory
- 크게 static과 dynamic으로 분류
  - SRAM
    - DRAM보다 빠르고 비쌈
    - 캐시 메모리로 쓰임
    - 몇십 메가바이트
  - DRAM
    - 메인 메모리
    - 그래픽 시스템의 프레임 버퍼
    - 몇천 메가바이트

### Static RAM
- bi-stable한 특성을 갖고 있음
- 전원이 들어오는 한 값을 무한히 유지
- disturb 하더라도 안정된 값으로 돌아옴

### Dynamic RAM
- 각 비트를 커패시터의 충전으로 저장
- disturb에 매우 예민
- 10~100 ms 기간으로 충전이 유실됨
  - 메모리 시스템은 주기적으로 메모리의 모든 비트를 refresh
  - 몇몇 시스템은 에러 수정 코드를 사용

### Conventional DRAMs
![](https://cdn.jsdelivr.net/gh/koktlzz/ImgBed@master/20211229220341.png)

![](https://cdn.jsdelivr.net/gh/koktlzz/ImgBed@master/20211229222645.png)

- `addr` 라는 2비트 좌표값을 통해 supercell을 읽는다. supercell은 8비트 데이터 크기.
- 2차원 배열 설계는 선형 배열 설계보다 더 적은 `addr` 비트 수를 사용할 수 있다. 다만, 두번의 구분된 단계를 통해 접근하기에 접근 시간이 오래 걸린다.

### Memory Modules
![](https://cw00h.github.io/assets/images/CSAPP-6/Untitled%202.png)
- 64MB 를 저장
  - DRAM은 총 8M개 supercell
  - 한 supercell은 8bit
- 메모리 컨트롤러는 
  - 가져올 word에 해당하는 메모리 주소 A를 superset 좌표 (i,j)로 변환
  - 각 DRAM에 i, j를 브로드캐스트
  - 각 DRAM에서 8비트씩. 총 64bit를 받아 
  - CPU에게 word 전달

### Enhanced DRAMs
여러 가지 있다. i7은 DDR3 SDRAM만 지원한다. 
- *Double Data-Rate Synchronous DRAM* 의 8bit prefetch buffer 타입

### Nonvolatile Memory
*ROMs*
- 몇 번이나 programmable 하냐에 따라 세부 유형이 나뉨
- Flash Memory 또한 ROM 기반
  - 현대에는 flash 기반의 디스크인 SSD로 발전됨
- ROM에 저장되는 프로그램이 바로 *firmware*.
  - BIOS(basic input/output system), 그래픽카드, 디스크 드라이브 컨트롤러 등은 CPU로부터의 입출력 요청을 변환하기 위해 펌웨어를 사용한다.

### Accessing Main Memory
- 데이터는 *buses*를 통해 CPU와 DRAM 메인 메모리 사이를 왔다갔다한다.
- 각 전달은 *bus transaction* 이라고 하는 단계의 연속으로 구성된다.

![](https://cw00h.github.io/assets/images/CSAPP-6/Untitled%203.png)
- I/O bridge 는 
  - 메모리 컨트롤러를 포함.
  - system bus의 전기 신호를 memory bus 의 전기 신호로 변환
  - 디스크나 그래픽 카드와 같은 입출력 장치를 시스템, 메모리 버스와 연결

![](https://cdn.jsdelivr.net/gh/koktlzz/ImgBed@master/20220103175152.png)

![](https://cdn.jsdelivr.net/gh/koktlzz/ImgBed@master/20220103175511.png)


## 1.2. Disk Storage

# 출처
- https://csapp.cs.cmu.edu/   
- 책 "Computer Systems : A Programmer’s Perspective"