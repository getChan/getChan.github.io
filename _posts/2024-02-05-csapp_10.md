---
title: "CSAPP(10) - System-Level I/O"
excerpt: "Computer Systems : A Programmer’s Perspective - 10장"

categories:
  - cs
tags:
  - csapp
last_modified_at: 2024-02-05T08:00:00-08:00
---

# 1. Unix I/O
- 리눅스 파일은 바이트의 시퀀스이다.
- 모든 입출력 장치는 파일로 모델링되어 있다.
  - 모든 입출력은 파일에 읽거나 쓰는 동작이다.
 
파일 열기
  - 앱은 커널에 파일 열기를 요청
  - 커널은 descriptor라 하는 음수아닌 정수를 반환
    - 서술자는 파일을 식별한다.
  - 리눅스 셸로 시랭된 프로세스는 표준입력(서술자 0), 표준출력(서술자 1), 표준에러(서술자 2) 3가지 파일을 열면서 시작된다.

파일 위치를 변경
- 커널의 파일 위치르 유지한다. 위치는 최초 0이다.
- 파일 위치는 파일 시작점부터의 바이트 오프셋이다.
- `seek` 연산

파일 읽고 쓰기
- 파일에서 메모리로 `n` 바이트를 복제하는 연산
- 현재 위치 `k`에서 시작해서 `n`만큼 증가시킨다.
- `m`바이트 크기의 파일이 있을 때, `k >= m` 이면 end-of-life(EOF)이다.
  - 명시적인 EOF 문자는 없다.
- 쓰기 연산도 유사하게 `n`바이트를 메모리에서 파일로 복제한다. 

파일 닫기
- 앱이 커널에 닫기 요청을 한다.
- 커널은 파일 열때 생성한 자료구조를 해제하고 서술자를 사용 가능한 서술자 풀에 반납한다.
- 프로세스가 어떤 이유든 종료되면, 커널은 열린 파일을 닫고 메모리 자원을 해제한다.

# 2. Files
